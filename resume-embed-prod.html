<div id="resume-app-dev">
<div style="text-align: center; margin-bottom: 30px;">
<h1 style="font-size: 2.5em; margin: 0 0 20px 0; font-weight: bold;">Job Seeker Resumes</h1>
<p style="font-size: 1.1em; line-height: 1.6; color: #333; margin: 0 0 20px 0;">
The resumes in this tool are composed of professionals who are seeking opportunities to support Federal Agencies. All Job Seekers are local to the Washington, DC area unless otherwise noted on their resume.
</p>
<p style="margin: 0; line-height: 1.5;">
<strong>For Job Seekers:</strong> Want to add your resume to this gallery? <a href="https://www.donaldleads.com/#resumesubmission" style="color: #4169e1; text-decoration: none; font-weight: 600;">Submit your resume here</a>.
</p>
</div>
<div id="filters-dev"></div>
<div id="resume-list-dev"><p>Loading content...</p></div>

<!-- Request Resume Modal -->
<div id="request-modal-dev" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; z-index:9999;">
<div id="modal-backdrop-dev" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5);"></div>
<div id="modal-content-dev" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:10px; box-shadow:0 4px 20px rgba(0,0,0,0.3); max-width:500px; width:90%; z-index:10000; font-family:Arial,sans-serif;">
<h3 style="margin:0 0 10px 0; font-weight:bold;">Request Copy of Unredacted Resume</h3>
<p id="modal-profile-name-dev" style="margin-bottom:15px; font-weight:normal;"></p>
<form id="request-form-dev">
<input type="text" id="requester-name-dev" placeholder="Your Name *" required style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ccc; border-radius:4px; font-size:0.9rem; box-sizing:border-box;">
<input type="email" id="requester-email-dev" placeholder="Your Email *" required style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ccc; border-radius:4px; font-size:0.9rem; box-sizing:border-box;">
<input type="tel" id="requester-phone-dev" placeholder="Your Phone Number (format: 000-000-0000) *" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ccc; border-radius:4px; font-size:0.9rem; box-sizing:border-box;">
<input type="text" id="requester-org-dev" placeholder="Your Organization *" required style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ccc; border-radius:4px; font-size:0.9rem; box-sizing:border-box;">
<textarea id="requester-message-dev" placeholder="Message (optional)" rows="3" style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ccc; border-radius:4px; font-size:0.9rem; box-sizing:border-box; font-family:Arial,sans-serif;"></textarea>
<input type="text" id="honeypot-dev" tabindex="-1" autocomplete="off" style="position:absolute; left:-9999px; width:1px; height:1px;">
<input type="hidden" id="profile-id-dev">
<div style="margin-top:20px; padding:15px; background:#f9f9f9; border-radius:6px; border:1px solid #e0e0e0;">
<p style="margin:0 0 12px 0; font-size:0.9rem; line-height:1.5;">Unredacted Resumes are currently free for Requestors. Job Seekers will be CC'd on the email distribution of their resume.</p>
<label style="display:flex; align-items:center; cursor:pointer; font-size:0.9rem;">
<input type="checkbox" id="tos-checkbox-dev" required style="margin-right:8px; width:18px; height:18px; cursor:pointer;">
<span>I have read and agree to the <a href="https://www.donaldleads.com/#resumestos" target="_blank" style="color:#0066cc; text-decoration:none;">terms of service</a></span>
</label>
</div>
<div style="display:flex; gap:10px; margin-top:10px;">
<button type="submit" id="submit-btn-dev" disabled style="padding:10px 20px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:0.9rem; background:#4169e1; color:white;">Submit Request</button>
<button type="button" id="cancel-btn-dev" style="padding:10px 20px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:0.9rem; background:#f2f2f2; color:#333;">Cancel</button>
</div>
<p id="form-status-dev" style="margin-top:10px; font-size:0.9rem;"></p>
</form>
</div>
</div>
</div>
<style>
/* Outer semi-transparent wrapper */
#resume-app-dev {
font-family: Arial, sans-serif;
max-width: 900px;
margin: 0 auto;
padding: 25px;
background: rgba(255, 255, 255, 0.95); /* semi-transparent white */
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
/* Filter groups */
.filter-group {
margin-bottom: 20px;
}
.filter-label-row {
display: flex;
align-items: center;
gap: 6px;
margin-bottom: 4px;
font-size: 0.95rem;
}
.filter-group strong {
display: inline-block;
}
/* Inline reset icon (layout D) */
.filter-reset-icon {
cursor: pointer;
user-select: none;
font-size: 0.9rem;
color: #666;
}
.filter-reset-icon:hover {
color: #000;
}
.filter-group button {
margin: 6px 6px 0 0;
padding: 8px 14px;
border: 1px solid #666;
background: #f2f2f2;
border-radius: 6px;
cursor: pointer;
font-size: 0.9rem;
transition: background 0.2s, transform 0.1s, border-color 0.2s, color 0.2s;
}
.filter-group button:hover {
background: #e6e6e6;
transform: translateY(-1px);
}
/* Selected filter state: royal blue */
.filter-group button.selected {
border-color: #4169e1; /* royal blue */
background: #e3ebff;
color: #1f3a93;
}
/* Candidate cards */
.candidate {
background: #ffffff;
border-radius: 10px;
padding: 18px;
margin-bottom: 18px;
box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.candidate h3 {
margin: 0 0 10px 0;
font-size: 1.25em;
}
.candidate p {
margin: 4px 0;
line-height: 1.4em;
font-size: 0.93rem;
}
.candidate a {
display: inline-block;
margin-top: 10px;
color: #0066cc;
text-decoration: none;
font-weight: bold;
font-size: 0.9rem;
}
.candidate a:hover {
text-decoration: underline;
}
.candidate .request-btn {
display: inline-block;
margin-left: 10px;
padding: 8px 16px;
background: #4169e1;
color: white;
border: none;
border-radius: 6px;
cursor: pointer;
font-weight: bold;
font-size: 0.9rem;
}
.candidate .request-btn:hover {
background: #3558c7;
}
.form-status-success {
color: green;
font-weight: bold;
}
.form-status-error {
color: red;
font-weight: bold;
}
#submit-btn-dev:disabled {
background: #cccccc !important;
cursor: not-allowed !important;
opacity: 0.6;
}
</style>
<script>
window.addEventListener("DOMContentLoaded", function () {
const DATA_URL = "https://raw.githubusercontent.com/donaldleads/DisplayResumes/main/resumes.json";
const WEBHOOK_URL = "https://default03b6d8e5ad004a41862a8cd358a96b.3a.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/c952e8c0353f4aabbdb846d7e9f73aeb/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=r20iiRrm8kYRgH9gRbWO8CBQ7KoFtxc6lqn2itUT-Bg";

// Strip newlines and trim
function clean(str) {
return String(str || "").replace(/\n/g, "").trim();
}

function sanitizeInput(input) {
return String(input).split('<').join('').split('>').join('').trim();
}

// ===== MODAL FUNCTIONALITY =====
let currentProfile = null;
let formOpenTime = null;

function openModal(profileName, profileId) {
currentProfile = { name: profileName, id: profileId };
formOpenTime = Date.now();
document.getElementById("modal-profile-name-dev").textContent = "Profile: " + profileName;
document.getElementById("profile-id-dev").value = profileId;
document.getElementById("request-modal-dev").style.display = "block";
document.getElementById("request-form-dev").reset();
document.getElementById("form-status-dev").textContent = "";
document.getElementById("form-status-dev").className = "";
document.getElementById("submit-btn-dev").disabled = true;
}

function closeModal() {
document.getElementById("request-modal-dev").style.display = "none";
currentProfile = null;
}

// Make openModal globally accessible for inline onclick handlers
window.openModal = openModal;

document.getElementById("cancel-btn-dev").addEventListener("click", closeModal);
document.getElementById("modal-backdrop-dev").addEventListener("click", closeModal);

document.getElementById("tos-checkbox-dev").addEventListener("change", function() {
document.getElementById("submit-btn-dev").disabled = !this.checked;
});

document.getElementById("request-form-dev").addEventListener("submit", async function(e) {
e.preventDefault();
const submitBtn = document.getElementById("submit-btn-dev");
const statusEl = document.getElementById("form-status-dev");
const honeypot = document.getElementById("honeypot-dev").value;
const timeSinceOpen = Date.now() - formOpenTime;

if (honeypot) {
console.log("Bot detected");
return;
}

if (timeSinceOpen <= 2999) {
statusEl.textContent = "Please take your time filling out the form.";
statusEl.className = "form-status-error";
return;
}

submitBtn.disabled = true;
statusEl.textContent = "Submitting...";
statusEl.className = "";

const formData = {
name: sanitizeInput(document.getElementById("requester-name-dev").value),
email: sanitizeInput(document.getElementById("requester-email-dev").value),
phone: sanitizeInput(document.getElementById("requester-phone-dev").value),
organization: sanitizeInput(document.getElementById("requester-org-dev").value),
profileRequested: currentProfile.name + (currentProfile.id ? " (ID: " + currentProfile.id + ")" : ""),
candidateId: currentProfile.id ? String(currentProfile.id) : "",
message: sanitizeInput(document.getElementById("requester-message-dev").value || ""),
tosAgreed: document.getElementById("tos-checkbox-dev").checked,
tosAgreedTimestamp: new Date().toISOString()
};

try {
const response = await fetch(WEBHOOK_URL, {
method: "POST",
headers: {
"Content-Type": "application/json"
},
body: JSON.stringify(formData)
});

if (response.ok) {
statusEl.textContent = "Request submitted successfully!";
statusEl.className = "form-status-success";
setTimeout(closeModal, 2000);
} else {
throw new Error("Request failed");
}
} catch (err) {
statusEl.textContent = "Error submitting request. Please try again.";
statusEl.className = "form-status-error";
submitBtn.disabled = false;
}
});

async function loadResumes() {
const res = await fetch(DATA_URL);
if (!res.ok) {
throw new Error("Failed to load resumes.json");
}
return await res.json();
}
function renderResumes(list) {
const container = document.getElementById("resume-list-dev");
if (!list || list.length === 0) {
container.innerHTML = "<p>No matching resumes.</p>";
return;
}
const html = list.map(r => `
<div class="candidate">
<h3>Profile: ${r.name}</h3>
<p><strong>Specialty:</strong> ${r.jobFunction.join(", ")}</p>
<p><strong>Supported:</strong> ${r.agenciesSupported.join(", ")}</p>
<a target="_blank" href="https://drive.google.com/file/d/${r.gdriveId}/preview">
View Resume
</a>
<button class="request-btn" onclick="openModal('${r.name}', '${r.id}')">Request Access</button>
</div>
`).join("");
container.innerHTML = html;
}
loadResumes()
.then(data => {
// Normalize data
const resumes = data.map(item => ({
id: item.id,
name: clean(item.name),
rawResId: clean(item.rawResId),
gdriveId: item.gdriveId,
gdriveFilePath: item.gdriveFilePath,
jobFunction: (item.jobFunction || []).map(j => clean(j.Value)),
agenciesSupported: (item.agenciesSupported || []).map(a => clean(a.Value)),
modified: item.modified
}));
// Build unique filter sets from normalized values
const specialties = Array.from(new Set(
resumes.flatMap(r => r.jobFunction)
)).sort();
const supported = Array.from(new Set(
resumes.flatMap(r => r.agenciesSupported)
)).sort();
const filtersDiv = document.getElementById("filters-dev");
filtersDiv.innerHTML = `
<div class="filter-group" id="specialty-filters-dev">
<div class="filter-label-row">
<span class="filter-reset-icon" data-reset="specialty" title="Reset">⟲</span>
<strong>Specialty:</strong>
</div>
${specialties.map(s => `<button type="button" class="filter-btn" data-specialty="${s}">${s}</button>`).join("")}
</div>
<div class="filter-group" id="supported-filters-dev">
<div class="filter-label-row">
<span class="filter-reset-icon" data-reset="supported" title="Reset">⟲</span>
<strong>Supported:</strong>
</div>
${supported.map(a => `<button type="button" class="filter-btn" data-supported="${a}">${a}</button>`).join("")}
</div>
`;
// Multi-select sets
const selectedSpecialties = new Set();
const selectedSupported = new Set();
function applyFilters() {
const selectedSpecArr = Array.from(selectedSpecialties);
const selectedSuppArr = Array.from(selectedSupported);
const filtered = resumes.filter(r => {
const specialtyOK =
selectedSpecArr.length === 0 ||
r.jobFunction.some(j => selectedSpecArr.includes(j));
const supportedOK =
selectedSuppArr.length === 0 ||
r.agenciesSupported.some(a => selectedSuppArr.includes(a));
return specialtyOK && supportedOK;
});
renderResumes(filtered);
}
// Toggle button selection state (for multi-select)
function toggleSelection(set, value, attr) {
if (set.has(value)) {
set.delete(value);
} else {
set.add(value);
}
// Update visual state
document.querySelectorAll("[" + attr + "]").forEach(btn => {
if (set.has(btn.getAttribute(attr))) {
btn.classList.add("selected");
} else {
btn.classList.remove("selected");
}
});
}
// Clear all selections for a category
function clearSelection(set, attr) {
set.clear();
document.querySelectorAll("[" + attr + "]").forEach(btn => {
btn.classList.remove("selected");
});
}
// Specialty buttons (multi-select + toggle)
document.querySelectorAll("[data-specialty]").forEach(btn => {
btn.addEventListener("click", () => {
const val = btn.dataset.specialty;
toggleSelection(selectedSpecialties, val, "data-specialty");
applyFilters();
});
});
// Supported buttons (multi-select + toggle)
document.querySelectorAll("[data-supported]").forEach(btn => {
btn.addEventListener("click", () => {
const val = btn.dataset.supported;
toggleSelection(selectedSupported, val, "data-supported");
applyFilters();
});
});
// Reset icons
document.querySelectorAll(".filter-reset-icon").forEach(icon => {
icon.addEventListener("click", () => {
const target = icon.dataset.reset;
if (target === "specialty") {
clearSelection(selectedSpecialties, "data-specialty");
} else if (target === "supported") {
clearSelection(selectedSupported, "data-supported");
}
applyFilters();
});
});
// Initial render
applyFilters();
})
.catch(err => {
console.error(err);
const container = document.getElementById("resume-list-dev");
container.innerHTML = "<p>Unable to load resumes right now.</p>";
});
});
</script>
